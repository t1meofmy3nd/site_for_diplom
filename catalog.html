
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Каталог | МедТех</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<header>
  <a href="index.html" class="logo">
    <img src="images/logo.png" alt="МедТех" />
  </a>
  <button class="menu-toggle" aria-label="Меню"><i class="fa-solid fa-bars"></i></button> 
  <nav>
    <a href="index.html">Главная</a>
    <a href="catalog.html" class="active">Каталог</a>
    <a href="services.html">Услуги</a>
    <a href="about.html">О нас</a>
    <a href="cart.html" class="cart-link"><i class="fa-solid fa-cart-shopping"></i><span class="cart-count">0</span></a>
    <a href="profile.php" class="account-link" style="display:none;"><i class="fa-solid fa-user"></i> Личный кабинет</a>
    <a href="login.php" class="login-link"><i class="fa-solid fa-right-to-bracket"></i> Войти</a>
    <a href="register.php" class="register-link"><i class="fa-solid fa-user-plus"></i> Регистрация</a>
    <a href="logout.php" class="logout-link" style="display:none;"><i class="fa-solid fa-right-from-bracket"></i> Выход</a>
  </nav>
</header>

<section class="filters-bar">
  <input type="text" id="searchInput" placeholder="Поиск по названию" />
  <select id="categoryFilter">
    <option value="">Категория</option>
    <option value="УЗИ">УЗИ</option>
    <option value="Рентген">Рентген</option>
    <option value="Дефибрилляторы">Дефибрилляторы</option>
    <option value="ЭКГ">ЭКГ</option>
    <option value="Мониторы">Мониторы</option>
  </select>
  <select id="sortSelect">
    <option value="">Сортировка</option>
    <option value="priceAsc">Цена: по возрастанию</option>
    <option value="priceDesc">Цена: по убыванию</option>
  </select>
  <select id="priceFilter">
    <option value="">Цена</option>
    <option value="0-150000">до 150 000 ₽</option>
    <option value="150000-250000">150 000 – 250 000 ₽</option>
    <option value="250000-400000">250 000 – 400 000 ₽</option>
  </select>
  <button id="resetFilters">Сбросить</button>
</section>

<p id="resultCount" style="text-align: center; margin-top: -10px;"></p>
<section id="product-list" class="products-grid" style="padding: 0 20px;"></section>

<footer>
  &copy; 2025 МедТех. Все права защищены.
</footer>

<script src="products.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const searchInput = document.getElementById("searchInput");
  const categoryFilter = document.getElementById("categoryFilter");
  const sortSelect = document.getElementById("sortSelect");
  const priceFilter = document.getElementById("priceFilter");
  const resetBtn = document.getElementById("resetFilters");
  const count = document.getElementById("resultCount");

  function filterAndRender() {
    let filtered = products;

    const query = searchInput.value.toLowerCase();
    const category = categoryFilter.value;
    const sort = sortSelect.value;
    const price = priceFilter.value;

    if (query) filtered = filtered.filter(p => p.name.toLowerCase().includes(query));
    if (category) filtered = filtered.filter(p => p.category === category);
    
    if (price) {
      const [min, max] = price.split("-").map(Number);
      filtered = filtered.filter(p => p.price >= min && p.price <= max);
    }

    if (sort === "priceAsc") filtered.sort((a, b) => a.price - b.price);
    if (sort === "priceDesc") filtered.sort((a, b) => b.price - a.price);

    const container = document.getElementById("product-list");
    container.innerHTML = "";
    count.textContent = "Найдено: " + filtered.length;

    filtered.forEach(product => {
      const card = document.createElement("div");
      card.className = "product-card";
      card.innerHTML = `
        <img src="${product.img}" alt="${product.name}">
        <h3>${product.name}</h3>
        <p>${product.price.toLocaleString()} ₽</p>
        <button onclick="addToCart(${product.id})">В корзину</button>
      `;
      container.appendChild(card);
    });
  }

  [searchInput, categoryFilter, priceFilter, sortSelect].forEach(el => {
    el.addEventListener("input", filterAndRender);
  });

  resetBtn.addEventListener("click", () => {
    searchInput.value = "";
    categoryFilter.value = "";
    priceFilter.value = "";
    sortSelect.value = "";
    filterAndRender();
  });

  filterAndRender();
});
</script>
<script src="header.js"></script>
<script src="session.js"></script>

</body>
</html>
